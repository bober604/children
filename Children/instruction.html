<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Инструкция</title>
    <link rel="shortcut icon" href="./img/logo-pizza_color.png" />

    <style>
        * {
            margin: 0;
            padding: 0;
        }

        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            background-color: #f4f4f4;
            color: #333;
            margin: 0;
            padding: 20px;
            display: flex;
        }
        a {
            height: 40px;
            position: fixed;
        }
        img {
            width: 30px;
            height: 30px;
            padding-top: 5px;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        h1, h2 {
            color: #222;
        }

        .section {
            margin-top: 20px;
            padding-top: 10px;
            border-top: 2px solid #ddd;
        }
        ul {
            padding-left: 20px;
        }
        .highlight {
            background: #ffeb3b;
            padding: 2px 5px;
            border-radius: 5px;
        }
        .button {
            background: #007bff;
            color: white;
            padding: 6px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            display: inline-block;
            margin-top: 10px;
        }
        .button:hover {
            background: #0056b3;
        }
        .warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 5px;
            padding: 15px;
            margin: 10px 0;
        }
        .info-box {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            border-radius: 5px;
            padding: 15px;
            margin: 10px 0;
        }

        [data-theme="dark"] body {
            background-color: #1a1a1a;
            color: #ffffff;
        }

        [data-theme="dark"] a {
            filter: invert(1);
        }

        [data-theme="dark"] .container {
            background: #2d2d2d;
            color: #ffffff;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
        }

        [data-theme="dark"] h1, 
        [data-theme="dark"] h2 {
            color: #ecc206;
        }

        [data-theme="dark"] .section {
            border-top: 2px solid #404040;
        }

        [data-theme="dark"] .highlight {
            background: #ecc206;
            color: #000000;
            padding: 2px 5px;
            border-radius: 5px;
        }

        [data-theme="dark"] .button {
            background: #ecc206;
            color: #000000;
        }

        [data-theme="dark"] .button:hover {
            background: #ffd700;
        }

        [data-theme="dark"] .warning {
            background: #332b00;
            border: 1px solid #665800;
            color: #ffd700;
        }

        [data-theme="dark"] .info-box {
            background: #003332;
            border: 1px solid #006665;
            color: #00ffff;
        }

        [data-theme="dark"] ul {
            color: #ffffff;
        }

        @media (max-width: 480px) {
            [data-theme="dark"] body {
                background-color: #1a1a1a;
                padding: 10px 25px 25px 5px;
            }

            [data-theme="dark"] .container {
                background: transparent;
                box-shadow: none;
            }

            body {
                padding: 10px 25px 25px 5px;
                background-color: #fff;
            }
            a {
                padding-right: 15px;
                position: relative;
            }
            img {
                width: 20px;
                height: 20px;
                padding-top: 10px;
            }
            .container {
                width: 100%;
                padding: 0px;
                box-shadow: none;
                border-radius: 0;
            }
            h1 {
                font-size: 24px;
            }
            h2 {
                font-size: 20px;
            }
            .section {
                margin-top: 5px;
                margin-bottom: 10px;
                padding-top: 5px;
            }
            .button {
                text-align: center;
                padding: 8px;
                margin-top: 5px;
            }
            .warning, .info-box {
                padding: 10px;
                margin: 8px 0;
            }
        }
    </style>
</head>
<body>
    <a href="./index.html"><img src="./img/exit-instruction.png" alt="exit-instruction"></a>
    <div class="container">
        <h1>Инструкция по использованию системы</h1>
        
        <div class="warning">
            <strong>⚠️ Почему важно следовать инструкции:</strong>
            <ul>
                <li>Гарантирует корректную работу всех функций системы</li>
                <li>Обеспечивает точный подсчёт времени и стоимости</li>
                <li>Предотвращает потерю данных и ошибки в статистике</li>
                <li>Обеспечивает синхронизацию между админской страницей и гостевым режимом</li>
            </ul>
        </div>

        <div class="section">
            <h2>1. Основные возможности</h2>
            <ul>
                <li>Добавление заказов</li>
                <li>Отслеживание оставшегося времени</li>
                <li>Изменение заказов</li>
                <li>Удаление заказов</li>
                <li>Ведение статистики</li>
                <li><strong>Гостевой режим для отображения текущих посещений</strong></li>
            </ul>
        </div>

        <div class="section">
            <h2>2. Добавление нового заказа</h2>
            <p>Для создания заказа введите данные ребёнка:</p>
            <ul>
                <li><span class="highlight">Имя</span> — вписывайте имена через пробел (если несколько детей). Таким образом по количеству слов, разделённых пробелом будет определяться фактическое количество детей. Далее это значение будет умножаться на сумму соответствующего времени посещения и показывать общий итог в строке <span style="text-decoration: underline; text-decoration-color: #c3b000;">Сумма заказа</span></li>
                <li><span class="highlight">Количество игр в аэрохоккей</span> — указывается для корректного подсчета выручки с игровой комнаты.</li>
                <li><span class="highlight">Примечание</span> — можно оставить дополнительную информацию (цвет одежды, характерные особенности и т.д.).</li>
            </ul>
            <p>После ввода данных нажмите кнопку <button class="button">Добавить</button>, чтобы создать заказ.</p>

            <div class="info-box">
                <strong>Горячие клавиши для быстрой работы:</strong>
                <ul>
                    <li><span class="highlight">Enter</span> — переходит к следующему полю ввода</li>
                    <li><span class="highlight">Enter</span> в последнем поле — создаёт заказ</li>
                    <li><span class="highlight">Shift + Enter</span> — мгновенно создаёт заказ из любого поля</li>
                </ul>
                <p><em>Пример: можно быстро заполнить только имя и нажать Shift+Enter для создания заказа!</em></p>
            </div>
        </div>

        <div class="section">
            <h2>3. Таймер посещения и система оповещений</h2>
            <p>Каждый заказ имеет встроенный таймер, отображающий оставшееся время в реальном времени.</p>
            <br>
            <p><strong>Особенности работы таймера:</strong></p>
            <ul>
                <li><strong>Обратный отсчёт</strong> → показывает точное оставшееся время посещения</li>
                <li><strong>Пауза</strong> → используйте кнопку паузы, когда ребёнок выходит из игровой комнаты</li>
                <li><strong>Красная рамка</strong> → автоматически появляется при истечении времени как сигнал к завершению заказа</li>
                <li><strong>Синхронизация</strong> → время синхронизируется с гостевой страницей для родителей</li>
            </ul>
            <br>
            <p>В том случае, когда ребёнок выходит за пределы игровой комнаты, обязательно останавливайте таймер соответствующей кнопкой. По возвращении обратный отсчёт должен быть возобновлён.</p>
        </div>

        <div class="section">
            <h2>4. Изменение заказа</h2>
            <p>Чтобы изменить заказ, нажмите кнопку <span class="highlight">"Изменить заказ"</span> в соответствующем блоке. В открывшемся окне можно:</p>
            <ul>
                <li>Изменить имя, количество игр в аэрохоккей или примечание</li>
                <li>Изменить время посещения</li>
                <li>Отменить или сохранить изменения</li>
            </ul>
            <p>Также при нажатии на кнопку <span class="highlight">"Изменить заказ"</span> будет подсчитываться уже прошедшее на тот момент время от первоначально выбранного обратного отсчёта. Данное количество прошедшего времени будет отниматься от нового выбранного и при сохранении указываться в качестве нового иссходного значения обратного отсчёта.</p>
        </div>

        <div class="section">
            <h2>5. Удаление заказа</h2>
            <p>Чтобы удалить заказ, нажмите кнопку <span class="highlight">"Удалить заказ"</span> в блоке соответствующего заказа. В открывшемся окне необходимо дважды подтвердить намерение удалить заказ. После второго подтверждения отменить данное действие будет невозможно.</p>
        </div>

        <div class="section">
            <h2>6. Завершение заказов</h2>
            
            <div class="info-box">
                <strong>🎯 Как работает система завершения заказов:</strong>
                <p>Когда время посещения истекает, система автоматически выделяет заказ <strong>красной рамкой</strong> - это визуальный сигнал о том, что время вышло и заказ нужно завершить.</p>
            </div>

            <p><strong>Процесс завершения заказа:</strong></p>
            <ul>
                <li><strong>Время истекло</strong> → заказ автоматически подсвечивается красной рамкой</li>
                <li><strong>Нажмите кнопку "Заказ выполнен"</strong> → заказ переходит в статус завершённого</li>
                <li><strong>Возобновление заказа</strong> → повторное нажатие "Заказ выполнен" возвращает заказ в активное состояние</li>
            </ul>

            <div class="warning">
                <strong>⚠️ Важно:</strong>
                <ul>
                    <li>Красная рамка - это только <strong>визуальное напоминание</strong>, заказ остаётся активным до ручного подтверждения</li>
                    <li>Завершённые заказы <strong>не отображаются в гостевом режиме</strong></li>
                    <li>Статистика выручки учитывает все заказы (активные и завершённые)</li>
                    <li>Если ребёнок ушёл раньше - можно завершить заказ вручную, не дожидаясь истечения времени</li>
                </ul>
            </div>
        </div>

        <div class="section">
            <h2>7. Ведение статистики</h2>
            <p>Чтобы перейти в раздел ведения статистики заказов, нажмите кнопку <span class="highlight">"Статистика"</span> в блоке навигации системы.</p>
        </div>

        <div class="section">
            <h2>8. Гостевой режим</h2>
            <div class="info-box">
                <strong>🎯 Что такое гостевой режим?</strong>
                <p>Это специальная страница, которая показывает родителям и сотрудникам <strong>текущие активные посещения</strong> в реальном времени. Она автоматически обновляется и синхронизируется с основной системой.</p>
            </div>
            
            <p><strong>Как это работает:</strong></p>
            <ul>
                <li>Откройте страницу Гостевого режима отсканировав <span class="highlight">QR-код</span> на любом устройстве</li>
                <li>Система автоматически показывает всех детей, которые сейчас находятся в игровой комнате. Вернее говоря, она показывает все активные (невыполненные) заказы.</li>
                <li>Родители видят:
                    <ul>
                        <li>Имена детей</li>
                        <li>Оставшееся время посещения</li>
                        <li>Статус (активно/на паузе)</li>
                    </ul>
                </li>
                <li>Данные обновляются автоматически каждую секунду</li>
                <li>Не требует авторизации - работает в режиме "только просмотр"</li>
            </ul>

            <p><strong>Важные особенности:</strong></p>
            <ul>
                <li>✅ Показывает только заказы за текущий день</li>
                <li>✅ Автоматически скрывает завершённые посещения</li>
                <li>✅ Отображает реальное оставшееся время</li>
                <li>✅ Работает на любом устройстве с доступом в интернет</li>
                <li>❌ Не позволяет вносить изменения (только просмотр)</li>
            </ul>
        </div>

        <div class="section">
            <h2>9. Автоматическая очистка</h2>
            <div class="warning">
                <strong>Важная информация:</strong><br>
                <p>Система автоматически очищает все заказы каждый день в <strong>00:00 (полночь)</strong>. Это означает, что:</p>
                <ul>
                    <li>Все активные и завершённые заказы удаляются</li>
                    <li>Статистика и выручка обнуляются</li>
                    <li>На следующий день начинается "с чистого листа"</li>
                    <li>Гостевая страница также очищается автоматически</li>
                </ul>
                <p><em>Не забудьте завершить все активные заказы до конца дня!</em></p>
            </div>
        </div>

        <div class="section">
            <h2>10. Советы по эффективной работе</h2>
            <ul>
                <li><strong>Используйте гостевой режим</strong> для прозрачности - родители будут видеть, сколько времени осталось у их детей</li>
                <li><strong>Не забывайте ставить на паузу</strong>, когда ребёнок выходит из игровой комнаты</li>
                <li><strong>Регулярно проверяйте статистику</strong> для анализа загруженности</li>
                <li><strong>Система автоматически сохраняет данные</strong> - не нужно ничего делать вручную</li>
                <li><strong>Для гостевого режима используйте отдельное устройство</strong> - это обеспечит стабильную работу</li>
            </ul>
        </div>
    </div>

    <script>
        // Изменяет URL без перезагрузки страницы
        window.history.pushState(null, null, '#Инструкция');

        // Загрузка темы из Local Storage
        document.addEventListener('DOMContentLoaded', function() {
            const currentTheme = localStorage.getItem('adminTheme') || 'light';
            document.documentElement.setAttribute('data-theme', currentTheme);
            
            // Применяем инвертирование для иконок в темной теме
            if (currentTheme === 'dark') {
                const backImages = document.querySelectorAll('.back-img');
                backImages.forEach(img => {
                    img.style.filter = 'invert(1)';
                });
            }
        });
    </script>
</body>
</html>