
# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–±–æ—Ç–µ —Å BlackPizza API –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

## 1. –ß—Ç–æ —ç—Ç–æ –∑–∞ API
–≠—Ç–æ –±—ç–∫–µ–Ω–¥, –∫–æ—Ç–æ—Ä—ã–π —Ö—Ä–∞–Ω–∏—Ç –∑–∞–∫–∞–∑—ã, —Å—á–∏—Ç–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏ –æ—Ç–¥–∞—ë—Ç –µ—ë —Ç–µ–±–µ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥.  
–¢–≤–æ—è –∑–∞–¥–∞—á–∞ ‚Äî –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ API –∏ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –¥–∞–Ω–Ω—ã–µ.

API —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ –∞–¥—Ä–µ—Å—É (–≤ —Ç–µ—Å—Ç–æ–≤–æ–º —Ä–µ–∂–∏–º–µ):
```
http://127.0.0.1:8000
```
(–ù–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –±—É–¥–µ—Ç –¥—Ä—É–≥–æ–π –∞–¥—Ä–µ—Å, –Ω–∞–ø—Ä–∏–º–µ—Ä: `https://api.blackpizza.com` ‚Äî —Ç–µ–±–µ —Å–∫–∞–∂—É—Ç.)

---

## 2. –ö–∞–∫ –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è
–ß—Ç–æ–±—ã —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –º–æ–≥ –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ API, —è –≤–∫–ª—é—á–∏–ª **CORS**.  
–≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ —Ç—ã –º–æ–∂–µ—à—å –¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ –º–æ–µ–º—É —Å–µ—Ä–≤–µ—Ä—É –¥–∞–∂–µ –µ—Å–ª–∏ —Ç–≤–æ–π —Å–∞–π—Ç –∑–∞–ø—É—â–µ–Ω –Ω–∞ –¥—Ä—É–≥–æ–º –ø–æ—Ä—Ç—É –∏–ª–∏ –¥–æ–º–µ–Ω–µ.

–ù–∞ –±—ç–∫–µ–Ω–¥–µ —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:

```python
from fastapi.middleware.cors import CORSMiddleware

app.add_middleware(
    CORSMiddleware,
    allow_origins=["*"],  # –ø–æ–∫–∞ –æ—Ç–∫—Ä—ã—Ç –¥–ª—è –≤—Å–µ—Ö –¥–æ–º–µ–Ω–æ–≤
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)
```

üìå –î–ª—è —Ç–µ—Å—Ç–æ–≤ `"*"` –ø–æ–¥—Ö–æ–¥–∏—Ç –∏–¥–µ–∞–ª—å–Ω–æ.  
üìå –ù–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –º—ã –ø—Ä–æ–ø–∏—à–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –¥–æ–º–µ–Ω —Å–∞–π—Ç–∞, —á—Ç–æ–±—ã –Ω–∏–∫—Ç–æ –ø–æ—Å—Ç–æ—Ä–æ–Ω–Ω–∏–π –Ω–µ –º–æ–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å API.

---

## 3. –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

### üì• –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∑–∞–∫–∞–∑—ã –∑–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –¥–µ–Ω—å
```javascript
fetch("http://127.0.0.1:8000/orders/09.08.2025")
  .then(res => res.json())
  .then(data => console.log(data))
```

### üì• –ü–æ–ª—É—á–∏—Ç—å —Å—Ä–µ–¥–Ω–∏–π —á–µ–∫ –∑–∞ –¥–µ–Ω—å
```javascript
fetch("http://127.0.0.1:8000/average/09.08.2025")
  .then(res => res.json())
  .then(data => console.log(data))
```

### üì• –ü–æ–ª—É—á–∏—Ç—å –æ–±—â—É—é –≤—ã—Ä—É—á–∫—É –∑–∞ –¥–µ–Ω—å
```javascript
fetch("http://127.0.0.1:8000/revenue/09.08.2025")
  .then(res => res.json())
  .then(data => console.log(data))
```

### üì§ –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –∑–∞–∫–∞–∑
```javascript
fetch("http://127.0.0.1:8000/order", {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify({
    sum: 500,
    date: "09.08.2025",
    time: "14.25.00"
  })
})
.then(res => res.json())
.then(data => console.log(data))
```

### üì§ –ò–∑–º–µ–Ω–∏—Ç—å –∑–∞–∫–∞–∑
```javascript
fetch("http://127.0.0.1:8000/order/update", {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify({
    old_sum: 500,
    date: "09.08.2025",
    time: "14.25.00",
    new_sum: 750
  })
})
.then(res => res.json())
.then(data => console.log(data))
```

### üóë –£–¥–∞–ª–∏—Ç—å –∑–∞–∫–∞–∑
```javascript
fetch("http://127.0.0.1:8000/order", {
  method: "DELETE",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify({
    sum: 500,
    date: "09.08.2025",
    time: "14.25.00"
  })
})
.then(res => res.json())
.then(data => console.log(data))
```

---

## 4. –ö–∞–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
- –î–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –∏—Å–ø–æ–ª—å–∑—É–π **Swagger UI** ‚Äî —Ç–∞–º –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –±–µ–∑ –∫–æ–¥–∞:  
  ```
  http://127.0.0.1:8000/docs
  ```
- –°–Ω–∞—á–∞–ª–∞ –¥–æ–±–∞–≤—å –ø–∞—Ä—É –∑–∞–∫–∞–∑–æ–≤, –ø–æ—Ç–æ–º –ø—Ä–æ–≤–µ—Ä—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É.
- –ï—Å–ª–∏ –≤–∏–¥–∏—à—å `CORS error` ‚Äî –∑–Ω–∞—á–∏—Ç –¥–æ–º–µ–Ω —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –Ω–µ —Ä–∞–∑—Ä–µ—à—ë–Ω, –ø–∏—à–∏ –º–Ω–µ, —è –¥–æ–±–∞–≤–ª—é –µ–≥–æ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.

---

## 5. –ß—Ç–æ –µ—â—ë –≤–∞–∂–Ω–æ
- –í—Å–µ –¥–∞—Ç—ã –ø–µ—Ä–µ–¥–∞–≤–∞–π –≤ —Ñ–æ—Ä–º–∞—Ç–µ `DD.MM.YYYY`
- –í—Å–µ –≤—Ä–µ–º–µ–Ω–∞ ‚Äî –≤ —Ñ–æ—Ä–º–∞—Ç–µ `HH.MM.SS`
- –í—Å–µ —Å—É–º–º—ã (`sum`) ‚Äî —Ü–µ–ª—ã–µ —á–∏—Å–ª–∞ –±–µ–∑ –∫–æ–ø–µ–µ–∫.
- –ï—Å–ª–∏ –Ω–∞–¥–æ –ø–æ–ª—É—á–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∑–∞ –ø–µ—Ä–∏–æ–¥ ‚Äî –µ—Å—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç `/orders_range/{start}/{end}` (—Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç —Ç–æ—Ç –∂–µ).

---

## 6. –ü—Ä–∏–º–µ—Ä –≥–æ—Ç–æ–≤–æ–≥–æ HTML + JS –¥–ª—è —Ç–µ—Å—Ç–∞
–°–∫–æ–ø–∏—Ä—É–π —ç—Ç–æ—Ç –∫–æ–¥ –≤ —Ñ–∞–π–ª `index.html`, –æ—Ç–∫—Ä–æ–π –≤ –±—Ä–∞—É–∑–µ—Ä–µ, –∏ —Ç—ã —Å–º–æ–∂–µ—à—å –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∑–∞–ø—Ä–æ—Å—ã –≤ API –ø—Ä—è–º–æ —Å –∫–Ω–æ–ø–æ–∫.

```html
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>BlackPizza API Test</title>
</head>
<body>
    <h1>–¢–µ—Å—Ç BlackPizza API</h1>

    <button onclick="getOrders()">–ü–æ–ª—É—á–∏—Ç—å –∑–∞–∫–∞–∑—ã –∑–∞ 09.08.2025</button>
    <button onclick="addOrder()">–î–æ–±–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑</button>

    <pre id="output"></pre>

    <script>
        const API_URL = "http://127.0.0.1:8000";

        function getOrders() {
            fetch(`${API_URL}/orders/09.08.2025`)
                .then(res => res.json())
                .then(data => document.getElementById("output").textContent = JSON.stringify(data, null, 2))
                .catch(err => console.error(err));
        }

        function addOrder() {
            fetch(`${API_URL}/order`, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({
                    sum: 500,
                    date: "09.08.2025",
                    time: "15.00.00"
                })
            })
            .then(res => res.json())
            .then(data => document.getElementById("output").textContent = JSON.stringify(data, null, 2))
            .catch(err => console.error(err));
        }
    </script>
</body>
</html>
```

üìå –ó–∞–ø—É—Å—Ç–∏ API –∫–æ–º–∞–Ω–¥–æ–π:
```
uvicorn main:app --reload
```
üìå –û—Ç–∫—Ä–æ–π `index.html` –≤ –±—Ä–∞—É–∑–µ—Ä–µ.  
üìå –ù–∞–∂–∏–º–∞–π –∫–Ω–æ–ø–∫–∏ ‚Äî –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –ø–æ—è–≤–ª—è—Ç—å—Å—è –≤ –æ–∫–Ω–µ.
